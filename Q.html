<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>點擊影片後字幕打字</title>
  <style>
    body {
      background-color: #FFB415;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .video-container {
      position: relative;
      width: 90%;
      max-width: 720px;
      height: 405px;
      margin-bottom: 20px;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    #overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.3);
      cursor: pointer;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      font-weight: bold;
    }

    #subtitle {
      max-width: 720px;
      white-space: pre-wrap;
      background: rgba(255, 255, 255, 0.8);
      padding: 15px;
      border-radius: 10px;
      font-size: 18px;
      display: none;
    }
  </style>
</head>
<body>

  <div class="video-container">
    <iframe id="ytplayer" src="https://www.youtube.com/embed/sLLcf1mSAoo?enablejsapi=1" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    <div id="overlay">點擊開始播放</div>
  </div>

  <div id="subtitle"></div>

  <script>
    const text = `無論你是兄弟還是母親
你都要活著，活著
感受這座城市的崩塌，所有人的顫抖
而我們也要活著，活著
啊哈哈哈，活著，活著（喔）
啊哈哈哈，活著（哦）…”

是時候讓我們再次開始跳舞了…
Wúlùn nǐ shì xiōngdì háishì mǔqīn
nǐ dōu yào huózhe, huózhe
gǎnshòu zhè zuò chéngshì de bēngtā, suǒyǒu rén de chàndǒu
ér wǒmen yě yào huózhe, huózhe
a hāhāhā, huózhe, huózhe (ō)
a hā hā hā, huózhe (ó)…”`;

    let player;
    let index = 0;
    let typingInterval;

    // 建立 YouTube API 播放器
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('ytplayer');
    }

    // 載入 YouTube API 腳本
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(tag);

    // 點擊遮罩後開始播放影片與字幕打字
    document.getElementById('overlay').addEventListener('click', () => {
      if (player) {
        player.playVideo();
        player.unMute();  // 確保解除靜音
        document.getElementById('overlay').style.display = 'none';

        // 顯示並開始字幕打字效果
        const subtitle = document.getElementById('subtitle');
        subtitle.textContent = "";
        subtitle.style.display = "block";
        index = 0;

        typingInterval = setInterval(() => {
          if (index < text.length) {
            subtitle.textContent += text.charAt(index);
            index++;
          } else {
            clearInterval(typingInterval);
          }
        }, 50);
      }
    });
  </script>
</body>
</html>
