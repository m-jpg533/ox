<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>â›ï¸ ç¶²é ç‰ˆæŒ–ç¤¦æ¨¡æ“¬å™¨</title>
  <style>
    body {
      font-family: "Courier New", monospace;
      background-color: #111;
      color: #0f0;
      padding: 20px;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
      text-shadow: 0 0 5px #0f0;
    }

    button {
      padding: 15px 25px;
      background-color: #0f0;
      border: none;
      color: black;
      font-weight: bold;
      font-size: 1.2em;
      cursor: pointer;
      margin-top: 20px;
      box-shadow: 0 0 10px #0f0;
    }

    .miner {
      border: 1px solid #0f0;
      padding: 10px;
      margin-bottom: 15px;
    }

    .progress {
      height: 20px;
      background-color: #333;
      margin-top: 5px;
    }

    .bar {
      height: 100%;
      background-color: lime;
      width: 0%;
      transition: width 0.1s;
    }

    .hash {
      font-size: 0.9em;
      color: #ccc;
    }

    .mining-icon {
      width: 40px;
      margin: 5px 0;
    }

    .fixed-animation {
      position: fixed;
      bottom: 10px;
      right: 10px;
      width: 80px;
      z-index: 999;
      opacity: 0.8;
    }
  </style>
</head>
<body>

<h1>ğŸ’» ç¶²é ç‰ˆæŒ–ç¤¦æ¯”è³½æ¨¡æ“¬å™¨</h1>
<div id="miners"></div>
<button onclick="startMining()">é–‹å§‹æŒ–ç¤¦</button>

<!-- ğŸ§ èƒŒæ™¯éŸ³æ¨‚ -->
<audio id="bgm" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" autoplay loop></audio>

<!-- ğŸ‰ æˆåŠŸéŸ³æ•ˆ -->
<audio id="successSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_1e8ae3a53c.mp3" preload="auto"></audio>

<!-- å›ºå®šå‹•ç•« -->
<img src="https://s5.ezgif.com/tmp/ezgif-598a2d87eca0ef.gif" alt="mining animation" class="fixed-animation">

<script>
  const NUM_MINERS = 4;
  const DIFFICULTY = 4;
  const miners = [];
  let mining = false;
  const targetPrefix = "0".repeat(DIFFICULTY);

  const bgm = document.getElementById("bgm");
  const successSound = document.getElementById("successSound");

  function createMiner(index) {
    const container = document.createElement("div");
    container.className = "miner";
    container.innerHTML = `
      <h3>ç¤¦å·¥ ${index + 1} â›ï¸</h3>
      <img width="120" height="120" src="https://s5.ezgif.com/tmp/ezgif-598a2d87eca0ef.gif" alt="mining" class="mining-icon">
      <div>é€Ÿåº¦ï¼š<span id="speed${index}">0</span> hash/s</div>
      <div>ç›®å‰ hashï¼š<span id="hash${index}" class="hash">N/A</span></div>
      <div class="progress"><div id="bar${index}" class="bar"></div></div>
      <div id="status${index}">ç‹€æ…‹ï¼šå¾…å‘½</div>
    `;
    document.getElementById("miners").appendChild(container);

    return {
      id: index,
      speedElem: document.getElementById(`speed${index}`),
      hashElem: document.getElementById(`hash${index}`),
      barElem: document.getElementById(`bar${index}`),
      statusElem: document.getElementById(`status${index}`),
      nonce: 0,
      running: false
    };
  }

  function fakeHash(input) {
    const chars = "abcdef0123456789";
    return Array.from({ length: 64 }, () => chars[Math.floor(Math.random() * chars.length)]).join('');
  }

  function startMining() {
    if (mining) return;
    mining = true;
    document.getElementById("miners").innerHTML = "";

    for (let i = 0; i < NUM_MINERS; i++) {
      miners[i] = createMiner(i);
    }

    for (let miner of miners) {
      miner.running = true;
      miner.statusElem.textContent = "ç‹€æ…‹ï¼šæŒ–ç¤¦ä¸­...";
      let count = 0;
      let lastTime = Date.now();

      function mine() {
        if (!mining || !miner.running) return;

        const hash = fakeHash(miner.nonce);
        miner.nonce++;
        miner.hashElem.textContent = hash;
        count++;

        if (hash.startsWith(targetPrefix)) {
          miner.statusElem.textContent = `ğŸ‰ æˆåŠŸæŒ–åˆ°ç¤¦ï¼nonce=${miner.nonce}`;
          miner.barElem.style.width = "100%";
          miner.running = false;
          mining = false;

          // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
          successSound.play();

          for (let m of miners) {
            if (m !== miner) {
              m.running = false;
              m.statusElem.textContent = "âŒ æ¯”è³½çµæŸ";
            }
          }

          return;
        }

        if (Date.now() - lastTime >= 1000) {
          miner.speedElem.textContent = count;
          count = 0;
          lastTime = Date.now();
        }

        miner.barElem.style.width = `${(miner.nonce % 100) + 1}%`;
        setTimeout(mine, Math.random() * 10);
      }

      mine();
    }

    // ç¢ºä¿èƒŒæ™¯éŸ³æ¨‚æ’­æ”¾ï¼ˆå¿…è¦æ™‚è§¸ç™¼æ’­æ”¾ï¼‰
    bgm.play().catch(() => {
      console.log("ç€è¦½å™¨é˜»æ“‹è‡ªå‹•æ’­æ”¾ï¼Œè«‹é»æ“Šç•«é¢å•Ÿç”¨éŸ³æ¨‚");
    });
  }
</script>

</body>
</html>

 
