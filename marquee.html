<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>捷運跑馬燈模擬</title>
  <style>
    body {
      background: black;
      color: yellow;
      font-family: "Microsoft JhengHei", sans-serif;
      text-align: center;
    }
    .marquee-container {
      position: relative;
      overflow: hidden;
      white-space: nowrap;
      border: 3px solid yellow;
      width: 100%;
      height: 60px;
      margin-top: 20px;
      background: black;
    }
    .marquee-text {
      display: inline-block;
      font-size: 28px; /* 手機大字體 */
      line-height: 60px;
      padding-left: 100%;
      animation: scroll 8s linear infinite;
    }
    @keyframes scroll {
      from { transform: translateX(100%); }
      to { transform: translateX(-100%); }
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 20px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <h1 style="color:white">🚇 捷運列車模擬</h1>
  <div class="marquee-container">
    <span id="msg" class="marquee-text">歡迎搭乘捷運，下一站 淡水 / Next Station: Tamsui</span>
  </div>
  <button onclick="startTrain()">開始模擬</button>

  <script>
    const stations = [
      "淡水 / Tamsui", "紅樹林 / Hongshulin", "竹圍 / Zhuwei", "關渡 / Guandu",
      "忠義 / Zhongyi", "復興崗 / Fuxinggang", "北投 / Beitou", "奇岩 / Qiyan",
      "唭哩岸 / Qilian", "石牌 / Shipai", "明德 / Mingde", "芝山 / Zhishan",
      "士林 / Shilin", "劍潭 / Jiantan", "圓山 / Yuanshan", "民權西路 / Minquan W. Rd.",
      "雙連 / Shuanglian", "中山 / Zhongshan", "台北車站 / Taipei Main Station",
      "台大醫院 / NTU Hospital", "中正紀念堂 / Chiang Kai-Shek Memorial Hall",
      "東門 / Dongmen", "大安森林公園 / Daan Park", "大安 / Daan",
      "信義安和 / Xinyi Anhe", "象山 / Xiangshan"
    ];

    let index = 0;
    let direction = 1; // 1 表示往象山，-1 表示往淡水
    let interval;

    function announce(text) {
      // 切換字幕
      document.getElementById("msg").textContent = "🚇 歡迎搭乘捷運，下一站 " + text;

      // 語音播報 (中英文)
      const speech = new SpeechSynthesisUtterance("下一站 " + text);
      speech.lang = "zh-TW";
      speechSynthesis.speak(speech);

      const speechEn = new SpeechSynthesisUtterance("Next Station: " + text.split("/")[1]);
      speechEn.lang = "en-US";
      speechSynthesis.speak(speechEn);
    }

    function startTrain() {
      clearInterval(interval);
      index = 0;
      direction = 1;
      announce(stations[index]);
      interval = setInterval(() => {
        index += direction;

        // 到象山或淡水時換方向
        if (index === stations.length - 1) {
          direction = -1;
        } else if (index === 0) {
          direction = 1;
        }

        announce(stations[index]);
      }, 10000); // 每 10 秒換下一站
    }
  </script>
</body>
</html>
