<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ğŸ° è±ªè¯å‹•ç•«è¼ªç›¤ Roulette</title>
<style>
  body {
    background: radial-gradient(circle at center, #111 60%, #000);
    color: #fff;
    text-align: center;
    font-family: "Microsoft JhengHei", sans-serif;
    overflow-x: hidden;
  }
  h1 {
    font-size: 2.5em;
    color: gold;
    text-shadow: 2px 2px 8px #000;
    margin-top: 30px;
  }
  #wheelContainer {
    position: relative;
    margin: 40px auto;
    width: 400px;
    height: 400px;
  }
  #wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 6px solid gold;
    box-shadow: 0 0 25px gold, inset 0 0 25px #000;
    transition: transform 4s cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  #pointer {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-bottom: 30px solid red;
  }
  #controls {
    margin-top: 20px;
  }
  select, input {
    font-size: 1.1em;
    padding: 5px;
    margin: 5px;
  }
  button {
    font-size: 1.2em;
    padding: 8px 15px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: gold;
    color: black;
    transition: 0.3s;
  }
  button:hover {
    background: #ffdb4d;
  }
  #balance {
    font-size: 1.4em;
    margin-top: 10px;
    color: #00ff80;
    text-shadow: 0 0 8px #00ff80;
  }
  #message {
    font-size: 1.3em;
    margin-top: 20px;
    font-weight: bold;
    text-shadow: 0 0 10px #fff;
  }
  .win {
    color: gold;
    animation: blink 1s infinite;
  }
  .lose {
    color: red;
  }
  @keyframes blink {
    50% { opacity: 0.4; }
  }
</style>
</head>
<body>

<h1>ğŸ° è±ªè¯å‹•ç•«è¼ªç›¤ Roulette</h1>

<div id="wheelContainer">
  <div id="pointer"></div>
  <canvas id="wheel" width="400" height="400"></canvas>
</div>

<div id="balance">ğŸ’° ç©å®¶é‡‘é¡ï¼š$1000</div>

<div id="controls">
  <label>ä¸‹æ³¨é¡è‰²ï¼š</label>
  <select id="colorChoice">
    <option value="red">ç´…è‰²</option>
    <option value="black">é»‘è‰²</option>
  </select>
  <label>ä¸‹æ³¨é‡‘é¡ï¼š</label>
  <input type="number" id="betAmount" min="10" max="1000" value="100">
  <button onclick="spin()">é–‹å§‹æ—‹è½‰</button>
</div>

<div id="message"></div>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const balanceDisplay = document.getElementById("balance");
const message = document.getElementById("message");

let playerBalance = 1000;
let currentRotation = 0;
let isSpinning = false;

// ğŸ¨ ç¹ªè£½è¼ªç›¤ï¼ˆ18 ç´…ã€18 é»‘ã€1 ç¶ ï¼‰
const colors = [];
for (let i = 0; i < 36; i++) colors.push(i % 2 === 0 ? "red" : "black");
colors.push("green");

function drawWheel() {
  const radius = canvas.width / 2;
  const sliceAngle = 2 * Math.PI / colors.length;
  for (let i = 0; i < colors.length; i++) {
    ctx.beginPath();
    ctx.moveTo(radius, radius);
    ctx.arc(radius, radius, radius, i * sliceAngle, (i + 1) * sliceAngle);
    ctx.closePath();
    ctx.fillStyle = colors[i];
    ctx.fill();

    // é¡¯ç¤ºæ•¸å­—
    ctx.save();
    ctx.translate(radius, radius);
    ctx.rotate(i * sliceAngle + sliceAngle / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "white";
    ctx.font = "bold 16px Arial";
    ctx.fillText(i, radius - 10, 5);
    ctx.restore();
  }
}
drawWheel();

// ğŸ¯ æ—‹è½‰åŠŸèƒ½
function spin() {
  if (isSpinning) return;
  const colorChoice = document.getElementById("colorChoice").value;
  const betAmount = parseInt(document.getElementById("betAmount").value);
  if (betAmount <= 0 || betAmount > playerBalance) {
    alert("ä¸‹æ³¨é‡‘é¡ä¸æ­£ç¢ºï¼");
    return;
  }

  isSpinning = true;
  message.textContent = "è¼ªç›¤æ—‹è½‰ä¸­...";
  message.className = "";

  const spinAngle = Math.random() * 360 + 360 * 5;
  currentRotation += spinAngle;
  canvas.style.transform = `rotate(${currentRotation}deg)`;

  setTimeout(() => {
    const normalized = currentRotation % 360;
    const segment = Math.floor(normalized / (360 / colors.length));
    const resultColor = colors[(colors.length - 1 - segment) % colors.length];

    if (resultColor === colorChoice) {
      const payout = betAmount * 2;
      playerBalance -= betAmount;
      playerBalance += betAmount;
      message.textContent = `ğŸ‰ æ­å–œï¼ä¸­äº†${resultColor.toUpperCase()}ï¼ç²å¾— $${payout}`;
      message.className = "win";
    } else {
      message.textContent = `ğŸ˜¢ æ²’ä¸­ï¼é–‹å‡º ${resultColor.toUpperCase()}ï¼Œæå¤± $${betAmount}`;
      message.className = "lose";
    }

    balanceDisplay.textContent = `ğŸ’° ç©å®¶é‡‘é¡ï¼š$${playerBalance}`;
    isSpinning = false;

  }, 4000);
}
</script>

</body>
</html>
